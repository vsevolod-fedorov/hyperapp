import logging
from PySide import QtCore, QtGui

log = logging.getLogger(__name__)


DEBUG_KEYS = False


key2name = {
    QtCore.Qt.Key_Escape: 'Escape',
    QtCore.Qt.Key_Tab: 'Tab',
    QtCore.Qt.Key_Backtab: 'Backtab',
    QtCore.Qt.Key_Backspace: 'Backspace',
    QtCore.Qt.Key_Return: 'Return',
    QtCore.Qt.Key_Enter: 'Enter',
    QtCore.Qt.Key_Insert: 'Insert',
    QtCore.Qt.Key_Delete: 'Delete',
    QtCore.Qt.Key_Pause: 'Pause',
    QtCore.Qt.Key_Print: 'Print',
    QtCore.Qt.Key_SysReq: 'SysReq',
    QtCore.Qt.Key_Clear: 'Clear',
    QtCore.Qt.Key_Home: 'Home',
    QtCore.Qt.Key_End: 'End',
    QtCore.Qt.Key_Left: 'Left',
    QtCore.Qt.Key_Up: 'Up',
    QtCore.Qt.Key_Right: 'Right',
    QtCore.Qt.Key_Down: 'Down',
    QtCore.Qt.Key_PageUp: 'PageUp',
    QtCore.Qt.Key_PageDown: 'PageDown',
    QtCore.Qt.Key_Shift: 'Shift',
    QtCore.Qt.Key_Control: 'Control',
    QtCore.Qt.Key_Meta: 'Meta',
    QtCore.Qt.Key_Alt: 'Alt',
    QtCore.Qt.Key_AltGr: 'AltGr',
    QtCore.Qt.Key_CapsLock: 'CapsLock',
    QtCore.Qt.Key_NumLock: 'NumLock',
    QtCore.Qt.Key_ScrollLock: 'ScrollLock',
    QtCore.Qt.Key_F1: 'F1',
    QtCore.Qt.Key_F2: 'F2',
    QtCore.Qt.Key_F3: 'F3',
    QtCore.Qt.Key_F4: 'F4',
    QtCore.Qt.Key_F5: 'F5',
    QtCore.Qt.Key_F6: 'F6',
    QtCore.Qt.Key_F7: 'F7',
    QtCore.Qt.Key_F8: 'F8',
    QtCore.Qt.Key_F9: 'F9',
    QtCore.Qt.Key_F10: 'F10',
    QtCore.Qt.Key_F11: 'F11',
    QtCore.Qt.Key_F12: 'F12',
    QtCore.Qt.Key_F13: 'F13',
    QtCore.Qt.Key_F14: 'F14',
    QtCore.Qt.Key_F15: 'F15',
    QtCore.Qt.Key_F16: 'F16',
    QtCore.Qt.Key_F17: 'F17',
    QtCore.Qt.Key_F18: 'F18',
    QtCore.Qt.Key_F19: 'F19',
    QtCore.Qt.Key_F20: 'F20',
    QtCore.Qt.Key_F21: 'F21',
    QtCore.Qt.Key_F22: 'F22',
    QtCore.Qt.Key_F23: 'F23',
    QtCore.Qt.Key_F24: 'F24',
    QtCore.Qt.Key_F25: 'F25',
    QtCore.Qt.Key_F26: 'F26',
    QtCore.Qt.Key_F27: 'F27',
    QtCore.Qt.Key_F28: 'F28',
    QtCore.Qt.Key_F29: 'F29',
    QtCore.Qt.Key_F30: 'F30',
    QtCore.Qt.Key_F31: 'F31',
    QtCore.Qt.Key_F32: 'F32',
    QtCore.Qt.Key_F33: 'F33',
    QtCore.Qt.Key_F34: 'F34',
    QtCore.Qt.Key_F35: 'F35',
    QtCore.Qt.Key_Super_L: 'Super_L',
    QtCore.Qt.Key_Super_R: 'Super_R',
    QtCore.Qt.Key_Menu: 'Menu',
    QtCore.Qt.Key_Hyper_L: 'Hyper_L',
    QtCore.Qt.Key_Hyper_R: 'Hyper_R',
    QtCore.Qt.Key_Help: 'Help',
    QtCore.Qt.Key_Direction_L: 'Direction_L',
    QtCore.Qt.Key_Direction_R: 'Direction_R',
    QtCore.Qt.Key_Space: 'Space',
    QtCore.Qt.Key_Exclam: 'Exclam',
    QtCore.Qt.Key_QuoteDbl: 'QuoteDbl',
    QtCore.Qt.Key_NumberSign: 'NumberSign',
    QtCore.Qt.Key_Dollar: 'Dollar',
    QtCore.Qt.Key_Percent: 'Percent',
    QtCore.Qt.Key_Ampersand: 'Ampersand',
    QtCore.Qt.Key_Apostrophe: 'Apostrophe',
    QtCore.Qt.Key_ParenLeft: 'ParenLeft',
    QtCore.Qt.Key_ParenRight: 'ParenRight',
    QtCore.Qt.Key_Asterisk: 'Asterisk',
    QtCore.Qt.Key_Plus: 'Plus',
    QtCore.Qt.Key_Comma: 'Comma',
    QtCore.Qt.Key_Minus: 'Minus',
    QtCore.Qt.Key_Period: 'Period',
    QtCore.Qt.Key_Slash: 'Slash',
    QtCore.Qt.Key_0: '0',
    QtCore.Qt.Key_1: '1',
    QtCore.Qt.Key_2: '2',
    QtCore.Qt.Key_3: '3',
    QtCore.Qt.Key_4: '4',
    QtCore.Qt.Key_5: '5',
    QtCore.Qt.Key_6: '6',
    QtCore.Qt.Key_7: '7',
    QtCore.Qt.Key_8: '8',
    QtCore.Qt.Key_9: '9',
    QtCore.Qt.Key_Colon: 'Colon',
    QtCore.Qt.Key_Semicolon: 'Semicolon',
    QtCore.Qt.Key_Less: 'Less',
    QtCore.Qt.Key_Equal: 'Equal',
    QtCore.Qt.Key_Greater: 'Greater',
    QtCore.Qt.Key_Question: 'Question',
    QtCore.Qt.Key_At: 'At',
    QtCore.Qt.Key_A: 'A',
    QtCore.Qt.Key_B: 'B',
    QtCore.Qt.Key_C: 'C',
    QtCore.Qt.Key_D: 'D',
    QtCore.Qt.Key_E: 'E',
    QtCore.Qt.Key_F: 'F',
    QtCore.Qt.Key_G: 'G',
    QtCore.Qt.Key_H: 'H',
    QtCore.Qt.Key_I: 'I',
    QtCore.Qt.Key_J: 'J',
    QtCore.Qt.Key_K: 'K',
    QtCore.Qt.Key_L: 'L',
    QtCore.Qt.Key_M: 'M',
    QtCore.Qt.Key_N: 'N',
    QtCore.Qt.Key_O: 'O',
    QtCore.Qt.Key_P: 'P',
    QtCore.Qt.Key_Q: 'Q',
    QtCore.Qt.Key_R: 'R',
    QtCore.Qt.Key_S: 'S',
    QtCore.Qt.Key_T: 'T',
    QtCore.Qt.Key_U: 'U',
    QtCore.Qt.Key_V: 'V',
    QtCore.Qt.Key_W: 'W',
    QtCore.Qt.Key_X: 'X',
    QtCore.Qt.Key_Y: 'Y',
    QtCore.Qt.Key_Z: 'Z',
    QtCore.Qt.Key_BracketLeft: 'BracketLeft',
    QtCore.Qt.Key_Backslash: 'Backslash',
    QtCore.Qt.Key_BracketRight: 'BracketRight',
    QtCore.Qt.Key_AsciiCircum: 'AsciiCircum',
    QtCore.Qt.Key_Underscore: 'Underscore',
    QtCore.Qt.Key_QuoteLeft: 'QuoteLeft',
    QtCore.Qt.Key_BraceLeft: 'BraceLeft',
    QtCore.Qt.Key_Bar: 'Bar',
    QtCore.Qt.Key_BraceRight: 'BraceRight',
    QtCore.Qt.Key_AsciiTilde: 'AsciiTilde',
    QtCore.Qt.Key_nobreakspace: 'nobreakspace',
    QtCore.Qt.Key_exclamdown: 'exclamdown',
    QtCore.Qt.Key_cent: 'cent',
    QtCore.Qt.Key_sterling: 'sterling',
    QtCore.Qt.Key_currency: 'currency',
    QtCore.Qt.Key_yen: 'yen',
    QtCore.Qt.Key_brokenbar: 'brokenbar',
    QtCore.Qt.Key_section: 'section',
    QtCore.Qt.Key_diaeresis: 'diaeresis',
    QtCore.Qt.Key_copyright: 'copyright',
    QtCore.Qt.Key_ordfeminine: 'ordfeminine',
    QtCore.Qt.Key_guillemotleft: 'guillemotleft',
    QtCore.Qt.Key_notsign: 'notsign',
    QtCore.Qt.Key_hyphen: 'hyphen',
    QtCore.Qt.Key_registered: 'registered',
    QtCore.Qt.Key_macron: 'macron',
    QtCore.Qt.Key_degree: 'degree',
    QtCore.Qt.Key_plusminus: 'plusminus',
    QtCore.Qt.Key_twosuperior: 'twosuperior',
    QtCore.Qt.Key_threesuperior: 'threesuperior',
    QtCore.Qt.Key_acute: 'acute',
    QtCore.Qt.Key_mu: 'mu',
    QtCore.Qt.Key_paragraph: 'paragraph',
    QtCore.Qt.Key_periodcentered: 'periodcentered',
    QtCore.Qt.Key_cedilla: 'cedilla',
    QtCore.Qt.Key_onesuperior: 'onesuperior',
    QtCore.Qt.Key_masculine: 'masculine',
    QtCore.Qt.Key_guillemotright: 'guillemotright',
    QtCore.Qt.Key_onequarter: 'onequarter',
    QtCore.Qt.Key_onehalf: 'onehalf',
    QtCore.Qt.Key_threequarters: 'threequarters',
    QtCore.Qt.Key_questiondown: 'questiondown',
    QtCore.Qt.Key_Agrave: 'Agrave',
    QtCore.Qt.Key_Aacute: 'Aacute',
    QtCore.Qt.Key_Acircumflex: 'Acircumflex',
    QtCore.Qt.Key_Atilde: 'Atilde',
    QtCore.Qt.Key_Adiaeresis: 'Adiaeresis',
    QtCore.Qt.Key_Aring: 'Aring',
    QtCore.Qt.Key_AE: 'AE',
    QtCore.Qt.Key_Ccedilla: 'Ccedilla',
    QtCore.Qt.Key_Egrave: 'Egrave',
    QtCore.Qt.Key_Eacute: 'Eacute',
    QtCore.Qt.Key_Ecircumflex: 'Ecircumflex',
    QtCore.Qt.Key_Ediaeresis: 'Ediaeresis',
    QtCore.Qt.Key_Igrave: 'Igrave',
    QtCore.Qt.Key_Iacute: 'Iacute',
    QtCore.Qt.Key_Icircumflex: 'Icircumflex',
    QtCore.Qt.Key_Idiaeresis: 'Idiaeresis',
    QtCore.Qt.Key_ETH: 'ETH',
    QtCore.Qt.Key_Ntilde: 'Ntilde',
    QtCore.Qt.Key_Ograve: 'Ograve',
    QtCore.Qt.Key_Oacute: 'Oacute',
    QtCore.Qt.Key_Ocircumflex: 'Ocircumflex',
    QtCore.Qt.Key_Otilde: 'Otilde',
    QtCore.Qt.Key_Odiaeresis: 'Odiaeresis',
    QtCore.Qt.Key_multiply: 'multiply',
    QtCore.Qt.Key_Ooblique: 'Ooblique',
    QtCore.Qt.Key_Ugrave: 'Ugrave',
    QtCore.Qt.Key_Uacute: 'Uacute',
    QtCore.Qt.Key_Ucircumflex: 'Ucircumflex',
    QtCore.Qt.Key_Udiaeresis: 'Udiaeresis',
    QtCore.Qt.Key_Yacute: 'Yacute',
    QtCore.Qt.Key_THORN: 'THORN',
    QtCore.Qt.Key_ssharp: 'ssharp',
    QtCore.Qt.Key_division: 'division',
    QtCore.Qt.Key_ydiaeresis: 'ydiaeresis',
    QtCore.Qt.Key_Multi_key: 'Multi_key',
    QtCore.Qt.Key_Codeinput: 'Codeinput',
    QtCore.Qt.Key_SingleCandidate: 'SingleCandidate',
    QtCore.Qt.Key_MultipleCandidate: 'MultipleCandidate',
    QtCore.Qt.Key_PreviousCandidate: 'PreviousCandidate',
    QtCore.Qt.Key_Mode_switch: 'Mode_switch',
    QtCore.Qt.Key_Kanji: 'Kanji',
    QtCore.Qt.Key_Muhenkan: 'Muhenkan',
    QtCore.Qt.Key_Henkan: 'Henkan',
    QtCore.Qt.Key_Romaji: 'Romaji',
    QtCore.Qt.Key_Hiragana: 'Hiragana',
    QtCore.Qt.Key_Katakana: 'Katakana',
    QtCore.Qt.Key_Hiragana_Katakana: 'Hiragana_Katakana',
    QtCore.Qt.Key_Zenkaku: 'Zenkaku',
    QtCore.Qt.Key_Hankaku: 'Hankaku',
    QtCore.Qt.Key_Zenkaku_Hankaku: 'Zenkaku_Hankaku',
    QtCore.Qt.Key_Touroku: 'Touroku',
    QtCore.Qt.Key_Massyo: 'Massyo',
    QtCore.Qt.Key_Kana_Lock: 'Kana_Lock',
    QtCore.Qt.Key_Kana_Shift: 'Kana_Shift',
    QtCore.Qt.Key_Eisu_Shift: 'Eisu_Shift',
    QtCore.Qt.Key_Eisu_toggle: 'Eisu_toggle',
    QtCore.Qt.Key_Hangul: 'Hangul',
    QtCore.Qt.Key_Hangul_Start: 'Hangul_Start',
    QtCore.Qt.Key_Hangul_End: 'Hangul_End',
    QtCore.Qt.Key_Hangul_Hanja: 'Hangul_Hanja',
    QtCore.Qt.Key_Hangul_Jamo: 'Hangul_Jamo',
    QtCore.Qt.Key_Hangul_Romaja: 'Hangul_Romaja',
    QtCore.Qt.Key_Hangul_Jeonja: 'Hangul_Jeonja',
    QtCore.Qt.Key_Hangul_Banja: 'Hangul_Banja',
    QtCore.Qt.Key_Hangul_PreHanja: 'Hangul_PreHanja',
    QtCore.Qt.Key_Hangul_PostHanja: 'Hangul_PostHanja',
    QtCore.Qt.Key_Hangul_Special: 'Hangul_Special',
    QtCore.Qt.Key_Dead_Grave: 'Dead_Grave',
    QtCore.Qt.Key_Dead_Acute: 'Dead_Acute',
    QtCore.Qt.Key_Dead_Circumflex: 'Dead_Circumflex',
    QtCore.Qt.Key_Dead_Tilde: 'Dead_Tilde',
    QtCore.Qt.Key_Dead_Macron: 'Dead_Macron',
    QtCore.Qt.Key_Dead_Breve: 'Dead_Breve',
    QtCore.Qt.Key_Dead_Abovedot: 'Dead_Abovedot',
    QtCore.Qt.Key_Dead_Diaeresis: 'Dead_Diaeresis',
    QtCore.Qt.Key_Dead_Abovering: 'Dead_Abovering',
    QtCore.Qt.Key_Dead_Doubleacute: 'Dead_Doubleacute',
    QtCore.Qt.Key_Dead_Caron: 'Dead_Caron',
    QtCore.Qt.Key_Dead_Cedilla: 'Dead_Cedilla',
    QtCore.Qt.Key_Dead_Ogonek: 'Dead_Ogonek',
    QtCore.Qt.Key_Dead_Iota: 'Dead_Iota',
    QtCore.Qt.Key_Dead_Voiced_Sound: 'Dead_Voiced_Sound',
    QtCore.Qt.Key_Dead_Semivoiced_Sound: 'Dead_Semivoiced_Sound',
    QtCore.Qt.Key_Dead_Belowdot: 'Dead_Belowdot',
    QtCore.Qt.Key_Dead_Hook: 'Dead_Hook',
    QtCore.Qt.Key_Dead_Horn: 'Dead_Horn',
    QtCore.Qt.Key_Back: 'Back',
    QtCore.Qt.Key_Forward: 'Forward',
    QtCore.Qt.Key_Stop: 'Stop',
    QtCore.Qt.Key_Refresh: 'Refresh',
    QtCore.Qt.Key_VolumeDown: 'VolumeDown',
    QtCore.Qt.Key_VolumeMute: 'VolumeMute',
    QtCore.Qt.Key_VolumeUp: 'VolumeUp',
    QtCore.Qt.Key_BassBoost: 'BassBoost',
    QtCore.Qt.Key_BassUp: 'BassUp',
    QtCore.Qt.Key_BassDown: 'BassDown',
    QtCore.Qt.Key_TrebleUp: 'TrebleUp',
    QtCore.Qt.Key_TrebleDown: 'TrebleDown',
    QtCore.Qt.Key_MediaPlay: 'MediaPlay',
    QtCore.Qt.Key_MediaStop: 'MediaStop',
    QtCore.Qt.Key_MediaPrevious: 'MediaPrevious',
    QtCore.Qt.Key_MediaNext: 'MediaNext',
    QtCore.Qt.Key_MediaRecord: 'MediaRecord',
    QtCore.Qt.Key_MediaPause: 'MediaPause',
    QtCore.Qt.Key_MediaTogglePlayPause: 'MediaTogglePlayPause',
    QtCore.Qt.Key_HomePage: 'HomePage',
    QtCore.Qt.Key_Favorites: 'Favorites',
    QtCore.Qt.Key_Search: 'Search',
    QtCore.Qt.Key_Standby: 'Standby',
    QtCore.Qt.Key_OpenUrl: 'OpenUrl',
    QtCore.Qt.Key_LaunchMail: 'LaunchMail',
    QtCore.Qt.Key_LaunchMedia: 'LaunchMedia',
    QtCore.Qt.Key_Launch0: 'Launch0',
    QtCore.Qt.Key_Launch1: 'Launch1',
    QtCore.Qt.Key_Launch2: 'Launch2',
    QtCore.Qt.Key_Launch3: 'Launch3',
    QtCore.Qt.Key_Launch4: 'Launch4',
    QtCore.Qt.Key_Launch5: 'Launch5',
    QtCore.Qt.Key_Launch6: 'Launch6',
    QtCore.Qt.Key_Launch7: 'Launch7',
    QtCore.Qt.Key_Launch8: 'Launch8',
    QtCore.Qt.Key_Launch9: 'Launch9',
    QtCore.Qt.Key_LaunchA: 'LaunchA',
    QtCore.Qt.Key_LaunchB: 'LaunchB',
    QtCore.Qt.Key_LaunchC: 'LaunchC',
    QtCore.Qt.Key_LaunchD: 'LaunchD',
    QtCore.Qt.Key_LaunchE: 'LaunchE',
    QtCore.Qt.Key_LaunchF: 'LaunchF',
    QtCore.Qt.Key_LaunchG: 'LaunchG',
    QtCore.Qt.Key_LaunchH: 'LaunchH',
    QtCore.Qt.Key_MonBrightnessUp: 'MonBrightnessUp',
    QtCore.Qt.Key_MonBrightnessDown: 'MonBrightnessDown',
    QtCore.Qt.Key_KeyboardLightOnOff: 'KeyboardLightOnOff',
    QtCore.Qt.Key_KeyboardBrightnessUp: 'KeyboardBrightnessUp',
    QtCore.Qt.Key_KeyboardBrightnessDown: 'KeyboardBrightnessDown',
    QtCore.Qt.Key_PowerOff: 'PowerOff',
    QtCore.Qt.Key_WakeUp: 'WakeUp',
    QtCore.Qt.Key_Eject: 'Eject',
    QtCore.Qt.Key_ScreenSaver: 'ScreenSaver',
    QtCore.Qt.Key_WWW: 'WWW',
    QtCore.Qt.Key_Memo: 'Memo',
    QtCore.Qt.Key_LightBulb: 'LightBulb',
    QtCore.Qt.Key_Shop: 'Shop',
    QtCore.Qt.Key_History: 'History',
    QtCore.Qt.Key_AddFavorite: 'AddFavorite',
    QtCore.Qt.Key_HotLinks: 'HotLinks',
    QtCore.Qt.Key_BrightnessAdjust: 'BrightnessAdjust',
    QtCore.Qt.Key_Finance: 'Finance',
    QtCore.Qt.Key_Community: 'Community',
    QtCore.Qt.Key_AudioRewind: 'AudioRewind',
    QtCore.Qt.Key_BackForward: 'BackForward',
    QtCore.Qt.Key_ApplicationLeft: 'ApplicationLeft',
    QtCore.Qt.Key_ApplicationRight: 'ApplicationRight',
    QtCore.Qt.Key_Book: 'Book',
    QtCore.Qt.Key_CD: 'CD',
    QtCore.Qt.Key_Calculator: 'Calculator',
    QtCore.Qt.Key_ToDoList: 'ToDoList',
    QtCore.Qt.Key_ClearGrab: 'ClearGrab',
    QtCore.Qt.Key_Close: 'Close',
    QtCore.Qt.Key_Copy: 'Copy',
    QtCore.Qt.Key_Cut: 'Cut',
    QtCore.Qt.Key_Display: 'Display',
    QtCore.Qt.Key_DOS: 'DOS',
    QtCore.Qt.Key_Documents: 'Documents',
    QtCore.Qt.Key_Excel: 'Excel',
    QtCore.Qt.Key_Explorer: 'Explorer',
    QtCore.Qt.Key_Game: 'Game',
    QtCore.Qt.Key_Go: 'Go',
    QtCore.Qt.Key_iTouch: 'iTouch',
    QtCore.Qt.Key_LogOff: 'LogOff',
    QtCore.Qt.Key_Market: 'Market',
    QtCore.Qt.Key_Meeting: 'Meeting',
    QtCore.Qt.Key_MenuKB: 'MenuKB',
    QtCore.Qt.Key_MenuPB: 'MenuPB',
    QtCore.Qt.Key_MySites: 'MySites',
    QtCore.Qt.Key_News: 'News',
    QtCore.Qt.Key_OfficeHome: 'OfficeHome',
    QtCore.Qt.Key_Option: 'Option',
    QtCore.Qt.Key_Paste: 'Paste',
    QtCore.Qt.Key_Phone: 'Phone',
    QtCore.Qt.Key_Calendar: 'Calendar',
    QtCore.Qt.Key_Reply: 'Reply',
    QtCore.Qt.Key_Reload: 'Reload',
    QtCore.Qt.Key_RotateWindows: 'RotateWindows',
    QtCore.Qt.Key_RotationPB: 'RotationPB',
    QtCore.Qt.Key_RotationKB: 'RotationKB',
    QtCore.Qt.Key_Save: 'Save',
    QtCore.Qt.Key_Send: 'Send',
    QtCore.Qt.Key_Spell: 'Spell',
    QtCore.Qt.Key_SplitScreen: 'SplitScreen',
    QtCore.Qt.Key_Support: 'Support',
    QtCore.Qt.Key_TaskPane: 'TaskPane',
    QtCore.Qt.Key_Terminal: 'Terminal',
    QtCore.Qt.Key_Tools: 'Tools',
    QtCore.Qt.Key_Travel: 'Travel',
    QtCore.Qt.Key_Video: 'Video',
    QtCore.Qt.Key_Word: 'Word',
    QtCore.Qt.Key_Xfer: 'Xfer',
    QtCore.Qt.Key_ZoomIn: 'ZoomIn',
    QtCore.Qt.Key_ZoomOut: 'ZoomOut',
    QtCore.Qt.Key_Away: 'Away',
    QtCore.Qt.Key_Messenger: 'Messenger',
    QtCore.Qt.Key_WebCam: 'WebCam',
    QtCore.Qt.Key_MailForward: 'MailForward',
    QtCore.Qt.Key_Pictures: 'Pictures',
    QtCore.Qt.Key_Music: 'Music',
    QtCore.Qt.Key_Battery: 'Battery',
    QtCore.Qt.Key_Bluetooth: 'Bluetooth',
    QtCore.Qt.Key_WLAN: 'WLAN',
    QtCore.Qt.Key_UWB: 'UWB',
    QtCore.Qt.Key_AudioForward: 'AudioForward',
    QtCore.Qt.Key_AudioRepeat: 'AudioRepeat',
    QtCore.Qt.Key_AudioRandomPlay: 'AudioRandomPlay',
    QtCore.Qt.Key_Subtitle: 'Subtitle',
    QtCore.Qt.Key_AudioCycleTrack: 'AudioCycleTrack',
    QtCore.Qt.Key_Time: 'Time',
    QtCore.Qt.Key_Hibernate: 'Hibernate',
    QtCore.Qt.Key_View: 'View',
    QtCore.Qt.Key_TopMenu: 'TopMenu',
    QtCore.Qt.Key_PowerDown: 'PowerDown',
    QtCore.Qt.Key_Suspend: 'Suspend',
    QtCore.Qt.Key_ContrastAdjust: 'ContrastAdjust',
    QtCore.Qt.Key_MediaLast: 'MediaLast',
    QtCore.Qt.Key_unknown: 'unknown',
    QtCore.Qt.Key_Call: 'Call',
    QtCore.Qt.Key_Camera: 'Camera',
    QtCore.Qt.Key_CameraFocus: 'CameraFocus',
    QtCore.Qt.Key_Context1: 'Context1',
    QtCore.Qt.Key_Context2: 'Context2',
    QtCore.Qt.Key_Context3: 'Context3',
    QtCore.Qt.Key_Context4: 'Context4',
    QtCore.Qt.Key_Flip: 'Flip',
    QtCore.Qt.Key_Hangup: 'Hangup',
    QtCore.Qt.Key_No: 'No',
    QtCore.Qt.Key_Select: 'Select',
    QtCore.Qt.Key_Yes: 'Yes',
    QtCore.Qt.Key_ToggleCallHangup: 'ToggleCallHangup',
    QtCore.Qt.Key_VoiceDial: 'VoiceDial',
    QtCore.Qt.Key_LastNumberRedial: 'LastNumberRedial',
    QtCore.Qt.Key_Execute: 'Execute',
    QtCore.Qt.Key_Printer: 'Printer',
    QtCore.Qt.Key_Play: 'Play',
    QtCore.Qt.Key_Sleep: 'Sleep',
    QtCore.Qt.Key_Zoom: 'Zoom',
    QtCore.Qt.Key_Cancel: 'Cancel',
    }


key_modifiers = {
    QtCore.Qt.ShiftModifier: 'Shift',
    QtCore.Qt.ControlModifier: 'Ctrl',
    QtCore.Qt.AltModifier: 'Alt',
    QtCore.Qt.MetaModifier: 'Meta',
    }

def modifiers2str( modifiers ):
    prefix = ''
    for mod_id, mod_name in key_modifiers.items():
        if modifiers & mod_id:
            prefix += mod_name + '+'
    return prefix

def key_evt2str( evt ):
    return modifiers2str(evt.modifiers()) + key2name[evt.key()]

def print_key_event( evt, prefix ):
    if DEBUG_KEYS \
        and evt.type() == QtCore.QEvent.Type.KeyPress \
        and evt.key() not in [QtCore.Qt.Key_Shift, QtCore.Qt.Key_Control, QtCore.Qt.Key_Alt]:
        log.info('%s %s', prefix, key_evt2str(evt))
