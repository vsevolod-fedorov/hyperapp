import:
- builtins:hyperapp_dir.service
- builtins:web.service
- legacy_type.builtin:attribute
- legacy_type.builtin:python_module
- legacy_type.rpc:server_error
- legacy_type.system:service_template
- common.reconstructors:reconstructors.module
- rc.build:build.module
- rc.rc_constants:rc_constants.module
- rc.rc_filter:rc_filter.module
- rc.init_targets:init_targets.module
- rc.process_pool:process_pool.module
- rc.target_set:target_set.module

definitions:

  rc.module:
    type: legacy_type.builtin:python_module
    value:
      module_name: rc
      file_name: rc.dyn.py
      import_list:
        htypes.rpc.server_error: legacy_type.rpc:server_error
        services.hyperapp_dir: builtins:hyperapp_dir.service
        services.web: builtins:web.service
        code.build: rc.build:build.module
        code.init_targets: rc.init_targets:init_targets.module
        code.reconstructors: common.reconstructors:reconstructors.module
        code.rc_constants: rc.rc_constants:rc_constants.module
        code.rc_filter: rc.rc_filter:rc_filter.module
        code.target_set: rc.target_set:target_set.module

  build:
    type: legacy_type.builtin:attribute
    value:
      object: rc.module
      attr_name: build

  build.service:
    type: legacy_type.system:service_template
    value:
      name: build
      function: build
      free_params: []
      service_params: []
      want_config: false

  compile_resources:
    type: legacy_type.builtin:attribute
    value:
      object: rc.module
      attr_name: compile_resources

  compile_resources.service:
    type: legacy_type.system:service_template
    value:
      name: compile_resources
      function: compile_resources
      free_params:
      - pool
      - targets
      - options
      service_params:
      - system_config
      - cfg_item_creg
      - ctr_from_template_creg
      - rc_job_result_creg
      - build
      want_config: false

  rc_main:
    type: legacy_type.builtin:attribute
    value:
      object: rc.module
      attr_name: rc_main

  rc_main.service:
    type: legacy_type.system:service_template
    value:
      name: rc_main
      function: rc_main
      free_params:
      - sys_argv
      service_params:
      - process_pool_running
      - compile_resources
      want_config: false
